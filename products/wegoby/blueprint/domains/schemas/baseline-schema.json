{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Baseline",
  "description": "Company defaults for Context - what Wegoby thinks is the best UX for most users. Evolves via Baseline Evolution.",
  "type": "object",
  "required": ["version", "presentation", "cognition", "autonomy", "continuity", "intent", "evolution"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Baseline version identifier (semver)"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    },
    "presentation": {
      "$ref": "#/definitions/PresentationDefaults"
    },
    "cognition": {
      "$ref": "#/definitions/CognitionDefaults"
    },
    "autonomy": {
      "$ref": "#/definitions/AutonomyDefaults"
    },
    "continuity": {
      "$ref": "#/definitions/ContinuityDefaults"
    },
    "intent": {
      "$ref": "#/definitions/IntentDefaults"
    },
    "evolution": {
      "$ref": "#/definitions/Evolution"
    }
  },
  "definitions": {
    "PresentationDefaults": {
      "type": "object",
      "description": "Default Surface preferences",
      "properties": {
        "layout": {
          "type": "object",
          "properties": {
            "density": { "type": "string", "default": "comfortable" },
            "columns": { "type": "string", "default": "single" }
          }
        },
        "visual": {
          "type": "object",
          "properties": {
            "theme": { "type": "string", "default": "system" },
            "animations": { "type": "boolean", "default": true },
            "iconStyle": { "type": "string", "default": "outlined" }
          }
        },
        "typography": {
          "type": "object",
          "properties": {
            "fontSize": { "type": "string", "default": "medium" },
            "lineHeight": { "type": "string", "default": "normal" }
          }
        }
      }
    },
    "CognitionDefaults": {
      "type": "object",
      "description": "Default Density preferences",
      "properties": {
        "detail": {
          "type": "object",
          "properties": {
            "level": { "type": "string", "default": "balanced" },
            "explanations": { "type": "boolean", "default": true }
          }
        },
        "tone": {
          "type": "object",
          "properties": {
            "formality": { "type": "string", "default": "neutral" },
            "encouragement": { "type": "string", "default": "moderate" }
          }
        },
        "load": {
          "type": "object",
          "properties": {
            "maxItemsPerView": { "type": "integer", "default": 20 },
            "progressiveDisclosure": { "type": "boolean", "default": true }
          }
        }
      }
    },
    "AutonomyDefaults": {
      "type": "object",
      "description": "Default Agency preferences",
      "properties": {
        "control": {
          "type": "object",
          "properties": {
            "mode": { "type": "string", "default": "balanced" },
            "confirmations": { "type": "string", "default": "destructive-only" }
          }
        },
        "automation": {
          "type": "object",
          "properties": {
            "suggestions": { "type": "boolean", "default": true },
            "autoComplete": { "type": "boolean", "default": false },
            "shortcuts": { "type": "boolean", "default": true }
          }
        },
        "guidance": {
          "type": "object",
          "properties": {
            "tooltips": { "type": "boolean", "default": true },
            "onboarding": { "type": "string", "default": "full" }
          }
        }
      }
    },
    "ContinuityDefaults": {
      "type": "object",
      "description": "Default Temporal Context preferences",
      "properties": {
        "memory": {
          "type": "object",
          "properties": {
            "rememberPreferences": { "type": "boolean", "default": true },
            "rememberHistory": { "type": "boolean", "default": true },
            "historyDepth": { "type": "integer", "default": 90 }
          }
        },
        "session": {
          "type": "object",
          "properties": {
            "resumeLastState": { "type": "boolean", "default": true },
            "crossDeviceSync": { "type": "boolean", "default": true }
          }
        },
        "anticipation": {
          "type": "object",
          "properties": {
            "predictActions": { "type": "boolean", "default": true },
            "preload": { "type": "boolean", "default": true }
          }
        }
      }
    },
    "IntentDefaults": {
      "type": "object",
      "description": "Default Content Matching preferences",
      "properties": {
        "constraints": {
          "type": "object",
          "properties": {
            "timeAvailable": { "type": "string", "default": "moderate" },
            "focusLevel": { "type": "string", "default": "moderate" }
          }
        }
      }
    },
    "Evolution": {
      "type": "object",
      "description": "Baseline Evolution tracking - aggregated patterns that may update defaults",
      "properties": {
        "threshold": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "default": 0.5,
          "description": "Percentage of users that must deviate to trigger evolution (default: 50%)"
        },
        "pendingChanges": {
          "type": "array",
          "description": "Candidate changes based on aggregated user patterns",
          "items": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string",
                "description": "JSON path to the property (e.g., 'cognition.detail.level')"
              },
              "currentValue": {
                "description": "Current baseline value"
              },
              "proposedValue": {
                "description": "Proposed new value based on user patterns"
              },
              "deviationRate": {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "description": "Percentage of users deviating from current baseline"
              },
              "sampleSize": {
                "type": "integer",
                "description": "Number of users in the sample"
              },
              "firstObserved": {
                "type": "string",
                "format": "date-time",
                "description": "When this pattern was first observed"
              }
            }
          }
        },
        "history": {
          "type": "array",
          "description": "Log of past baseline evolutions",
          "items": {
            "type": "object",
            "properties": {
              "path": { "type": "string" },
              "oldValue": {},
              "newValue": {},
              "deviationRate": { "type": "number" },
              "appliedAt": { "type": "string", "format": "date-time" },
              "reason": { "type": "string" }
            }
          }
        }
      }
    }
  }
}
